import{u as U,f as te,g as se,h as J,i as le,P as ae,t as re,j as oe,k as b,l as f,m as Ee,n as Y,p as s,q as ie,R as O,s as ne,v as ue,x as ce,C as Be,y as Ae,z as he,A as me,B as pe,D as de,E as ve,F as ye,G as T,H as _,I as ge,J as R,K as Fe}from"./app-DjqQ9Aow.js";const Ce=["/","/intro.html","/demos/AES-DES%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86%E7%A4%BA%E4%BE%8B.html","/demos/","/documents/","/documents/git.html","/documents/node.html","/documents/vscode.html","/more/","/more/%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF%E5%9B%BE.html","/more/%E7%AB%99%E7%82%B9%E5%AF%BC%E8%88%AA.html","/notes/","/posts/Airbnb%20JavaScript%20%E9%A3%8E%E6%A0%BC%E6%8C%87%E5%8D%97.html","/posts/JS%E6%A8%A1%E5%9D%97%E5%8C%96%E8%AF%A6%E8%A7%A3.html","/posts/","/posts/this%E6%8C%87%E5%90%91.html","/posts/%E5%9F%BA%E4%BA%8Epm2%20_%20Verdaccio%20%E6%90%AD%E5%BB%BA%E7%A7%81%E6%9C%89npm%E5%BA%93.html","/posts/%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95%E6%95%B4%E7%90%86.html","/notes/chrome-tools/01.%E8%B0%B7%E6%AD%8C%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8%E7%A4%BA%E4%BE%8B.html","/notes/chrome-tools/","/notes/design-mode/1.%E5%89%8D%E8%A8%80.html","/notes/design-mode/10.%E7%8A%B6%E6%80%81%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/11.%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/12.%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/2.%E7%AE%80%E5%8D%95%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/3.%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/4.%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/5.%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/6.%E8%A3%85%E9%A5%B0%E5%99%A8%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/7.%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/8.%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/9.%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F.html","/notes/design-mode/","/notes/react/00.React%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE.html","/notes/react/01.%E7%AE%80%E4%BB%8B.html","/notes/react/02.%E6%8F%8F%E8%BF%B0UI.html","/notes/react/03.%E6%B7%BB%E5%8A%A0%E4%BA%A4%E4%BA%92.html","/notes/react/04.%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86.html","/notes/react/05.%E8%84%B1%E5%9B%B4%E6%9C%BA%E5%88%B6.html","/notes/react/06.React%20Router%206.html","/notes/react/100.%E6%9E%84%E5%BB%BAReact%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.html","/notes/react/","/notes/typescript/01.%E7%AE%80%E4%BB%8B.html","/notes/typescript/02.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html","/notes/typescript/03.%E7%B1%BB%E5%9E%8B%E6%8E%A8%E8%AE%BA.html","/notes/typescript/04.%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B.html","/notes/typescript/05.%E6%95%B0%E7%BB%84%E7%9A%84%E7%B1%BB%E5%9E%8B.html","/notes/typescript/06.%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%B1%BB%E5%9E%8B%E2%80%94%E2%80%94%E6%8E%A5%E5%8F%A3.html","/notes/typescript/07.%E5%87%BD%E6%95%B0%E7%9A%84%E7%B1%BB%E5%9E%8B.html","/notes/typescript/08.%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80.html","/notes/typescript/09.%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6.html","/notes/typescript/","/404.html","/category/","/category/%E6%9B%B4%E5%A4%9A/","/category/javascript/","/category/node/","/category/%E7%AC%94%E8%AE%B0/","/tag/","/tag/javascript/","/tag/node/","/tag/%E8%B0%B7%E6%AD%8C%E6%8F%92%E4%BB%B6/","/tag/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/","/tag/react/","/tag/typescript/","/article/","/star/","/timeline/"],De="SEARCH_PRO_QUERY_HISTORY",d=U(De,[]),fe=()=>{const{queryHistoryCount:l}=R,a=l>0;return{enabled:a,queryHistory:d,addQueryHistory:r=>{a&&(d.value=Array.from(new Set([r,...d.value.slice(0,l-1)])))},removeQueryHistory:r=>{d.value=[...d.value.slice(0,r),...d.value.slice(r+1)]}}},L=l=>Ce[l.id]+("anchor"in l?`#${l.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,v=U(Re,[]),He=()=>{const l=$>0;return{enabled:l,resultHistory:v,addResultHistory:a=>{if(l){const r={link:L(a),display:a.display};"header"in a&&(r.header=a.header),v.value=[r,...v.value.slice(0,$-1)]}},removeResultHistory:a=>{v.value=[...v.value.slice(0,a),...v.value.slice(a+1)]}}},ke=l=>{const a=Be(),r=J(),H=Ae(),E=b(0),F=f(()=>E.value>0),h=he([]);return me(()=>{const{search:m,terminate:k}=pe(),y=ge(u=>{const g=u.join(" "),{searchFilter:Q=A=>A,splitWord:S,suggestionsFilter:j,...p}=a.value;g?(E.value+=1,m(u.join(" "),r.value,p).then(A=>Q(A,g,r.value,H.value)).then(A=>{E.value-=1,h.value=A}).catch(A=>{console.warn(A),E.value-=1,E.value||(h.value=[])})):h.value=[]},R.searchDelay-R.suggestDelay);Y([l,r],([u])=>y(u),{immediate:!0}),de(()=>{k()})}),{isSearching:F,results:h}};var Se=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(l,{emit:a}){const r=se(),H=J(),E=le(ae),{enabled:F,addQueryHistory:h,queryHistory:m,removeQueryHistory:k}=fe(),{enabled:y,resultHistory:u,addResultHistory:g,removeResultHistory:Q}=He(),S=F||y,j=re(l,"queries"),{results:p,isSearching:A}=ke(j),o=oe({isQuery:!0,index:0}),c=b(0),B=b(0),P=f(()=>S&&(m.value.length>0||u.value.length>0)),w=f(()=>p.value.length>0),q=f(()=>p.value[c.value]||null),M=()=>{const{isQuery:e,index:t}=o;t===0?(o.isQuery=!e,o.index=e?u.value.length-1:m.value.length-1):o.index=t-1},V=()=>{const{isQuery:e,index:t}=o;t===(e?m.value.length-1:u.value.length-1)?(o.isQuery=!e,o.index=0):o.index=t+1},z=()=>{c.value=c.value>0?c.value-1:p.value.length-1,B.value=q.value.contents.length-1},G=()=>{c.value=c.value<p.value.length-1?c.value+1:0,B.value=0},K=()=>{B.value<q.value.contents.length-1?B.value+=1:G()},N=()=>{B.value>0?B.value-=1:z()},x=e=>e.map(t=>Fe(t)?t:s(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ve[e.index]||"$content",[i,D=""]=ye(t)?t[H.value].split("$content"):t.split("$content");return e.display.map(n=>s("div",x([i,...n,D])))}return e.display.map(t=>s("div",x(t)))},C=()=>{c.value=0,B.value=0,a("updateQuery",""),a("close")},X=()=>F?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},E.value.queryHistory),m.value.map((e,t)=>s("div",{class:["search-pro-result-item",{active:o.isQuery&&o.index===t}],onClick:()=>{a("updateQuery",e)}},[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},e),s("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:i=>{i.preventDefault(),i.stopPropagation(),k(t)}})]))])):null,Z=()=>y?s("ul",{class:"search-pro-result-list"},s("li",{class:"search-pro-result-list-item"},[s("div",{class:"search-pro-result-title"},E.value.resultHistory),u.value.map((e,t)=>s(O,{to:e.link,class:["search-pro-result-item",{active:!o.isQuery&&o.index===t}],onClick:()=>{C()}},()=>[s(T,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[e.header?s("div",{class:"content-header"},e.header):null,s("div",e.display.map(i=>x(i)).flat())]),s("button",{class:"search-pro-remove-icon",innerHTML:_,onClick:i=>{i.preventDefault(),i.stopPropagation(),Q(t)}})]))])):null;return Ee("keydown",e=>{if(l.isFocusing){if(w.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")K();else if(e.key==="Enter"){const t=q.value.contents[B.value];h(l.queries.join(" ")),g(t),r.push(L(t)),C()}}else if(y){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const{index:t}=o;o.isQuery?(a("updateQuery",m.value[t]),e.preventDefault()):(r.push(u.value[t].link),C())}}}}),Y([c,B],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>s("div",{class:["search-pro-result-wrapper",{empty:l.queries.length?!w.value:!P.value}],id:"search-pro-results"},l.queries.length?A.value?s(ie,{hint:E.value.searching}):w.value?s("ul",{class:"search-pro-result-list"},p.value.map(({title:e,contents:t},i)=>{const D=c.value===i;return s("li",{class:["search-pro-result-list-item",{active:D}]},[s("div",{class:"search-pro-result-title"},e||E.value.defaultTitle),t.map((n,ee)=>{const I=D&&B.value===ee;return s(O,{to:L(n),class:["search-pro-result-item",{active:I,"aria-selected":I}],onClick:()=>{h(l.queries.join(" ")),g(n),C()}},()=>[n.type==="text"?null:s(n.type==="title"?ne:n.type==="heading"?ue:ce,{class:"search-pro-result-type"}),s("div",{class:"search-pro-result-content"},[n.type==="text"&&n.header?s("div",{class:"content-header"},n.header):null,s("div",W(n))])])})])})):E.value.emptyResult:S?P.value?[X(),Z()]:E.value.emptyHistory:E.value.emptyResult)}});export{Se as default};
